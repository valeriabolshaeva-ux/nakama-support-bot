# =============================================================================
# ENV.EXAMPLE — Nakama Agency
#
# Сервисы, для которых в этом env уже предусмотрены секреты/настройки подключения:
# - PostgreSQL (основная БД через Yandex Cloud, read-only доступ)
# - Proxy (HTTP/HTTPS)
# - SMTP (рассылки/почта)
# - AI провайдеры: OpenAI, OpenRouter
# - Google: Service Account (Drive/API) + Domain-wide delegation (impersonation)
# - Транскриберы: SynopsisAI, SpeakAI, Nexara
# - Интеграции: n8n (webhook + API key), PII Detector, PACHCA webhook (алерты)
# - Zoom (Server-to-Server OAuth + webhook secret)
# - Supabase (SDK API + direct Postgres)
# =============================================================================


# ========== DataBase Credentials ==========
# Основная PostgreSQL (Yandex Cloud). Обычно это read-only пользователь для чтения прод-данных.
PG__HOST=YOUR_DB_HOST.mdb.yandexcloud.net
PG__PORT=6432
PG__USER=nakama_db_read
PG__PASSWORD=YOUR_DB_PASSWORD
PG__DATABASE=nakama_prod


# ========== Proxy Server ==========
# Прокси для исходящих HTTP/HTTPS запросов (если инфраструктура требует).
PROXY__HTTP=http://YOUR_PROXY_HOST:YOUR_PROXY_PORT
PROXY__HTTPS=http://YOUR_PROXY_HOST:YOUR_PROXY_PORT


# ========== SMTP Server for mailings ==========
# SMTP для отправки писем (например, Gmail SMTP). Пароль обычно App Password.
SMTP__HOST=smtp.gmail.com
SMTP__PORT=587
SMTP__USER=your_mailbox@nakama.email
SMTP__PASSWORD=YOUR_SMTP_PASSWORD


# ========== AI Providers ==========
# OpenAI credentials
# OPENAI__API_KEY — ключ OpenAI
# OPENAI__URL — endpoint для Chat Completions (оставьте дефолт, если используете напрямую)
# OPENAI__ORG_ID — опционально, если вы привязываете запросы к конкретной организации OpenAI
OPENAI__API_KEY=YOUR_OPENAI_API_KEY
OPENAI__URL=https://api.openai.com/v1/chat/completions
OPENAI__ORG_ID=YOUR_OPENAI_ORG_ID

# OpenRouter credentials
OPENROUTER__API_KEY=YOUR_OPENROUTER_API_KEY
OPENROUTER__URL=https://openrouter.ai/api/v1


# ========== Google ==========
# Google Drive / Google APIs через Service Account
# Рекомендуемый способ для деплоя: хранить JSON как base64 в env и на старте сервиса распаковать в файл.
# Пример команды (macOS): base64 -i path/to/service-account.json | tr -d '\n' | pbcopy
GOOGLE_SERVICE_ACCOUNT_JSON_B64=YOUR_GOOGLE_SA_JSON_BASE64

# От чьего имени в домене действуем (Domain-wide delegation). Корпоративный email.
GOOGLE_IMPERSONATE_USER_EMAIL=info@nakama.email


# ========== Transcribers ==========
# SynopsisAI
SYNOPSIS__API_KEY=YOUR_SYNOPSIS_API_KEY
SYNOPSIS__URL=https://api.synopsisai.ru/v1/synopses

# SpeakAI
SPEAKAI__API_KEY=YOUR_SPEAKAI_API_KEY
SPEAKAI__AUTH_URL=https://api.speakai.co/v1/auth/accessToken
SPEAKAI__UPLOAD_URL=https://api.speakai.co/v1/media/upload
SPEAKAI__DOWNLOAD_URL=https://api.speakai.co/v1/media/insight/{media_id}

# Nexara
NEXARA__API_KEY=YOUR_NEXARA_API_KEY
NEXARA__URL=https://api.nexara.ru/api/v1/audio/transcriptions


# ========== Third-Party Integrations ==========
# n8n integration
# N8N__WEBHOOK_URL — URL вебхука конкретного workflow в n8n
# N8N__API_KEY — если вы дергаете n8n API (или ваш gateway перед n8n)
N8N__WEBHOOK_URL=https://YOUR_N8N_DOMAIN/webhook/YOUR_WEBHOOK_ID
N8N__API_KEY=YOUR_N8N_API_KEY

# PII Detector (сервис деперсонализации/поиска персональных данных)
PII_DETECTOR_API_KEY=YOUR_PII_DETECTOR_API_KEY
PII_DETECTOR_BASE_URL=http://YOUR_PII_DETECTOR_HOST:8003

# PACHCA (мессенджер) — webhook для алертов/уведомлений
PACHCA__WEBHOOK_URL=https://YOUR_PACHCA_WEBHOOK_URL


# ========== Zoom ==========
# Zoom S2S OAuth (Server-to-Server) — Zoom App Marketplace -> ваше S2S приложение -> App Credentials
ZOOM_ACCOUNT_ID=YOUR_ZOOM_ACCOUNT_ID
ZOOM_CLIENT_ID=YOUR_ZOOM_CLIENT_ID
ZOOM_CLIENT_SECRET=YOUR_ZOOM_CLIENT_SECRET

# Zoom Webhook Secret Token — ваше S2S приложение -> Feature -> Token -> Secret Token
ZOOM_WEBHOOK_SECRET=YOUR_ZOOM_WEBHOOK_SECRET


# =========================
# SUPABASE: идентификация проекта
# =========================
# ID (project ref) — используется в хостах/урлах и полезен для логов/скриптов
SUPABASE_PROJECT_ID=aytggkesmkqqvbblgxiu

# URL проекта — нужен для SDK (supabase-js / supabase-py) и для REST API
SUPABASE_URL=https://aytggkesmkqqvbblgxiu.supabase.co


# =========================
# SUPABASE: API keys (для SDK/HTTP API)
# =========================
# Publishable key (публичный) — можно использовать в браузере ТОЛЬКО если включен RLS и настроены политики
SUPABASE_PUBLISHABLE_KEY=YOUR_SUPABASE_PUBLISHABLE_KEY

# Secret key (секретный) — админский доступ, обходит RLS. ТОЛЬКО сервер/функции/воркеры.
SUPABASE_SECRET_KEY=YOUR_SUPABASE_SECRET_KEY


# =========================
# SUPABASE: прямое подключение к Postgres (psycopg2/SQL)
# =========================
# Host для direct connection обычно выглядит так: db.<project_ref>.supabase.co
SUPABASE_DB_HOST=db.aytggkesmkqqvbblgxiu.supabase.co

# Порт Postgres (direct) обычно 5432
SUPABASE_DB_PORT=5432

# Имя базы по умолчанию — postgres
SUPABASE_DB_NAME=postgres

# Пользователь по умолчанию — postgres
SUPABASE_DB_USER=postgres

# Пароль базы данных (Database Password из Supabase)
SUPABASE_DB_PASSWORD=YOUR_SUPABASE_DB_PASSWORD

# SSL для Supabase Postgres: обычно нужно require
SUPABASE_DB_SSLMODE=require

# Опционально: единая строка подключения (удобно для большинства библиотек)
DATABASE_URL=postgresql://postgres:YOUR_SUPABASE_DB_PASSWORD@db.aytggkesmkqqvbblgxiu.supabase.co:5432/postgres

# Подключение к продакшн Nakama API spellit.ai сервиса
NAKAMA_API__BASE_URL=https://YOUR_DOMAIN_OR_IP
NAKAMA_API__ACCESS_KEY=YOUR_READONLY_KEY
