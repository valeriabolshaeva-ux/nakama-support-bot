# üìò Dev Playbook ‚Äî –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ Cursor

> –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ª—é–±–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI-–∞–≥–µ–Ω—Ç–æ–≤ –≤ Cursor IDE.
> –í–µ—Ä—Å–∏—è: 1.1 | –ê–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è: 2026

---

## üìÅ 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–∫–µ–ª–µ—Ç)

–ö–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç –î–û–õ–ñ–ï–ù —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
project_root/
‚îú‚îÄ‚îÄ .cursorrules              # –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è Cursor AI –∞–≥–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ .env                      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞—ë—Ç –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö, –Ω–µ AI!)
‚îú‚îÄ‚îÄ .env.example              # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ë–ï–ó —Å–µ–∫—Ä–µ—Ç–æ–≤!)
‚îú‚îÄ‚îÄ .gitignore                # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ .flake8                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–∞
‚îú‚îÄ‚îÄ README.md                 # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (30 —Å–µ–∫: —á—Ç–æ —ç—Ç–æ –∏ –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å)
‚îú‚îÄ‚îÄ CLAUDE.md                 # –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è Claude Code (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ settings.py               # Pydantic Settings (–¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ ‚Äî –≤ –∫–æ—Ä–Ω–µ)
‚îÇ
‚îú‚îÄ‚îÄ app/                      # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py           # –§–∞–π–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è Python
‚îÇ   ‚îú‚îÄ‚îÄ settings.py           # Pydantic Settings (–¥–ª—è –º–æ–Ω–æ–ª–∏—Ç–∞ ‚Äî –≤–Ω—É—Ç—Ä–∏ app/)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ tests/                    # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îî‚îÄ‚îÄ e2e/
‚îÇ
‚îú‚îÄ‚îÄ scripts/                  # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ docs/                     # üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–ò–°–¢–û–ß–ù–ò–ö –ü–†–ê–í–î–´)
‚îÇ   ‚îú‚îÄ‚îÄ project-plan.md       # –ü–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ —Ñ–∞–∑–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ technical-summary.md  # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ agent-prompts.md      # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤ (–ø–æ –≤–æ–ª–Ω–∞–º)
‚îÇ   ‚îú‚îÄ‚îÄ architecture.md       # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã)
‚îÇ   ‚îú‚îÄ‚îÄ changelogs/           # Changelog'–∏ –∞–≥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ wave-1-agent-1.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ production/           # üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ README.md         # –û–±—â–∞—è –≤–≤–æ–¥–Ω–∞—è –ø—Ä–æ —Å–µ—Ä–≤–∏—Å
‚îÇ       ‚îú‚îÄ‚îÄ api-reference.md  # –û–ø–∏—Å–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ API
‚îÇ       ‚îú‚îÄ‚îÄ database-schema.md # –û–ø–∏—Å–∞–Ω–∏–µ –ë–î –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îî‚îÄ‚îÄ quick-reference.md # –®–ø–∞—Ä–≥–∞–ª–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ temporary/                # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã/—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã (–§–∞–∑–∞ 0)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml        # Docker Compose –¥–ª—è production
‚îú‚îÄ‚îÄ docker-compose-dev.yml    # Docker Compose –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îî‚îÄ‚îÄ Dockerfile                # –û—Å–Ω–æ–≤–Ω–æ–π Dockerfile
```

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö—Ç–æ —Å–æ–∑–¥–∞—ë—Ç |
|------|------------|-------------|
| `.cursorrules` | –ü—Ä–∞–≤–∏–ª–∞ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤ Cursor | –ú–û–ó–ì |
| `.env` | –†–µ–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | **–†–ê–ó–†–ê–ë–û–¢–ß–ò–ö (—á–µ–ª–æ–≤–µ–∫!)** |
| `.env.example` | –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ | –ú–û–ó–ì/–ê–≥–µ–Ω—Ç |
| `.gitignore` | –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ Git | –ú–û–ó–ì |
| `.flake8` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–∞ | –ú–û–ó–ì |
| `settings.py` | Pydantic Settings (–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–∞) | –ú–û–ó–ì/–ê–≥–µ–Ω—Ç |
| `README.md` | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ | –ú–û–ó–ì |
| `docs/project-plan.md` | –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –ø–æ —Ñ–∞–∑–∞–º | –ú–û–ó–ì |
| `docs/technical-summary.md` | –ü–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ | –ú–û–ó–ì |
| `docs/agent-prompts.md` | –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤ | –ú–û–ó–ì |
| `docs/architecture.md` | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã | –ú–û–ó–ì |

> ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –§–∞–π–ª `.env` —Å–æ–∑–¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ –ß–ï–õ–û–í–ï–ö-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫! AI-–∞–≥–µ–Ω—Ç—ã –ù–ò–ö–û–ì–î–ê –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `.env` ‚Äî —Ç–æ–ª—å–∫–æ `.env.example`.

---

## üê≥ 2. Docker

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ Docker-—Ñ–∞–π–ª—ã

**Dockerfile** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```dockerfile
FROM python:3.11-slim

WORKDIR /app

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–¥
COPY . .

# –ó–∞–ø—É—Å–∫
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

**docker-compose-dev.yml** ‚Äî –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```yaml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - .:/app  # Hot reload
    env_file:
      - .env
    depends_on:
      - db
      - redis

  db:
    image: postgres:16
    environment:
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
      POSTGRES_DB: ${DB_NAME}
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

volumes:
  postgres_data:
```

**docker-compose.yml** ‚Äî –¥–ª—è production (–±–µ–∑ volumes, –±–µ–∑ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π).

### –ö–æ–º–∞–Ω–¥—ã Docker

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
docker-compose -f docker-compose-dev.yml up -d      # –ó–∞–ø—É—Å–∫
docker-compose -f docker-compose-dev.yml logs -f    # –õ–æ–≥–∏
docker-compose -f docker-compose-dev.yml down       # –û—Å—Ç–∞–Ω–æ–≤–∫–∞

# Production
docker-compose up -d --build
```

---

## üîê 3. –°–µ–∫—Ä–µ—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞

```
‚úÖ –°–µ–∫—Ä–µ—Ç—ã ‚Äî –¢–û–õ–¨–ö–û –≤ .env (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç–∏–º!)
‚úÖ –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ‚Äî –¢–û–õ–¨–ö–û .env.example (—Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏)
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–∞ ‚Äî —á–µ—Ä–µ–∑ Pydantic Settings
‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å API –∫–ª—é—á–∏, –ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã –≤ –∫–æ–¥
‚ùå AI-–∞–≥–µ–Ω—Ç—ã –ù–ò–ö–û–ì–î–ê –Ω–µ —Å–æ–∑–¥–∞—é—Ç/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç .env
```

### Pydantic Settings (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)

–í–º–µ—Å—Ç–æ `os.getenv()` –∏—Å–ø–æ–ª—å–∑—É–µ–º **Pydantic Settings** –¥–ª—è:
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
- ‚úÖ Type hints –∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
- ‚úÖ –ï–¥–∏–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø—Ä–∞–≤–¥—ã –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–∞:**
- **–ú–æ–Ω–æ–ª–∏—Ç**: `app/settings.py`
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã**: `settings.py` –≤ –∫–æ—Ä–Ω–µ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

**–ü—Ä–∏–º–µ—Ä `settings.py`:**

```python
"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Pydantic Settings.

–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–ï—Å–ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.
"""

from pydantic import Field, field_validator
from pydantic_settings import BaseSettings, SettingsConfigDict


class DatabaseSettings(BaseSettings):
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL."""
    
    model_config = SettingsConfigDict(env_prefix="DB_")
    
    host: str = Field(description="–•–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö")
    port: int = Field(default=5432, description="–ü–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö")
    user: str = Field(description="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    password: str = Field(description="–ü–∞—Ä–æ–ª—å")
    name: str = Field(description="–ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö")
    
    @property
    def url(self) -> str:
        """–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è."""
        return f"postgresql+asyncpg://{self.user}:{self.password}@{self.host}:{self.port}/{self.name}"


class ExternalAPISettings(BaseSettings):
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö API."""
    
    model_config = SettingsConfigDict(env_prefix="")
    
    # –ü—Ä–∏–º–µ—Ä —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
    openai_api_key: str = Field(description="OpenAI API Key")
    
    @field_validator("openai_api_key")
    @classmethod
    def validate_openai_key(cls, v: str) -> str:
        if not v.startswith("sk-"):
            raise ValueError("OpenAI API key –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å 'sk-'")
        return v


class Settings(BaseSettings):
    """–ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è."""
    
    model_config = SettingsConfigDict(
        env_file=".env",
        env_file_encoding="utf-8",
        env_nested_delimiter="__",
        extra="ignore",
    )
    
    # –í–ª–æ–∂–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    db: DatabaseSettings = DatabaseSettings()
    api: ExternalAPISettings = ExternalAPISettings()
    
    # –ü—Ä–æ—Å—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    debug: bool = Field(default=False, description="–†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏")
    environment: str = Field(default="local", description="–û–∫—Ä—É–∂–µ–Ω–∏–µ: local/dev/prod")


# Singleton ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
settings = Settings()
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from app.settings import settings

# –í–º–µ—Å—Ç–æ os.getenv("DB_HOST")
db_url = settings.db.url
api_key = settings.api.openai_api_key
```

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ .gitignore

```gitignore
# Environment (–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç–∏–º!)
.env
.env.local
.env.*.local

# Secrets
*.pem
*.key
*credentials*.json
*secret*.json
token.json

# Temporary
tmp/
temp/
temporary/
__pycache__/
*.pyc
.venv/
venv/
node_modules/

# IDE
.idea/
.vscode/
*.swp

# Build
dist/
build/
*.egg-info/

# Docker
docker-compose.override.yml
```

### –§–æ—Ä–º–∞—Ç .env.example (–ü–û–î–†–û–ë–ù–´–ô!)

–ö–∞–∂–¥—ã–π API –∫–ª—é—á –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
- üìù –û–ø–∏—Å–∞–Ω–∏–µ —á—Ç–æ —ç—Ç–æ –∑–∞ –∫–ª—é—á
- üîó –ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å (URL)
- üîë –ö–∞–∫–∏–µ scopes/permissions –Ω—É–∂–Ω—ã
- üë§ –¢–∏–ø –∫–ª—é—á–∞ (admin/read-only/etc)
- üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é

```bash
# ==============================================================================
# üîê –ë–ê–ó–ê –î–ê–ù–ù–´–• ‚Äî PostgreSQL
# ==============================================================================
# –•–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (localhost –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è Docker)
DB_HOST=localhost

# –ü–æ—Ä—Ç PostgreSQL (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π: 5432)
DB_PORT=5432

# –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î (—Å–æ–∑–¥–∞—Ç—å: CREATE USER myuser WITH PASSWORD 'pass';)
DB_USER=your_username

# –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
DB_PASSWORD=your_password_here

# –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞—Ç—å: CREATE DATABASE mydb OWNER myuser;)
DB_NAME=your_database

# ==============================================================================
# ü§ñ OPENAI API
# ==============================================================================
# API –∫–ª—é—á OpenAI
# –ü–æ–ª—É—á–∏—Ç—å: https://platform.openai.com/api-keys
# –¢–∏–ø: Secret Key (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "sk-")
# –ü—Ä–∞–≤–∞: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ API (gpt-4, gpt-3.5-turbo, embeddings)
# –õ–∏–º–∏—Ç—ã: –ó–∞–≤–∏—Å—è—Ç –æ—Ç —Ç–∞—Ä–∏—Ñ–∞ ($5-$120/–º–µ—Å—è—Ü)
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ: Settings ‚Üí API Keys ‚Üí Create new secret key
OPENAI_API_KEY=sk-your-api-key-here

# ==============================================================================
# üìä GOOGLE SHEETS API
# ==============================================================================
# Service Account JSON —Ñ–∞–π–ª
# –ü–æ–ª—É—á–∏—Ç—å: https://console.cloud.google.com/iam-admin/serviceaccounts
# 
# –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –°–û–ó–î–ê–ù–ò–Æ:
# 1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console
# 2. –í–∫–ª—é—á–∏—Ç—å Google Sheets API: APIs & Services ‚Üí Enable APIs ‚Üí Google Sheets API
# 3. –°–æ–∑–¥–∞—Ç—å Service Account: IAM & Admin ‚Üí Service Accounts ‚Üí Create
# 4. –°–∫–∞—á–∞—Ç—å JSON –∫–ª—é—á: Actions ‚Üí Manage keys ‚Üí Add key ‚Üí JSON
# 5. –†–∞—Å—à–∞—Ä–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ email —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç–∞
#
# –ù–ï–û–ë–•–û–î–ò–ú–´–ï SCOPES (–≤–∫–ª—é—á–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è Service Account):
# - https://www.googleapis.com/auth/spreadsheets (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å —Ç–∞–±–ª–∏—Ü)
# - https://www.googleapis.com/auth/drive.readonly (–¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º)
#
# –¢–∏–ø: Service Account (–Ω–µ OAuth!)
# –ü—Ä–∞–≤–∞: Editor (–¥–ª—è –∑–∞–ø–∏—Å–∏) –∏–ª–∏ Viewer (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
GOOGLE_SERVICE_ACCOUNT_FILE=path/to/service-account.json

# ID —Ç–∞–±–ª–∏—Ü—ã (–∏–∑ URL: https://docs.google.com/spreadsheets/d/{SPREADSHEET_ID}/edit)
GOOGLE_SPREADSHEET_ID=1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms

# ==============================================================================
# üìß SMTP (Email)
# ==============================================================================
# SMTP —Å–µ—Ä–≤–µ—Ä
# Gmail: smtp.gmail.com (—Ç—Ä–µ–±—É–µ—Ç App Password, –Ω–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å!)
# Yandex: smtp.yandex.ru
# Mail.ru: smtp.mail.ru
SMTP_HOST=smtp.gmail.com

# –ü–æ—Ä—Ç: 587 (STARTTLS) –∏–ª–∏ 465 (SSL)
SMTP_PORT=587

# Email –∞–∫–∫–∞—É–Ω—Ç
SMTP_USER=your-email@gmail.com

# –ü–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ù–ï –ø–∞—Ä–æ–ª—å –æ—Ç –ø–æ—á—Ç—ã!)
# Gmail: https://myaccount.google.com/apppasswords
# –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: –í–∫–ª—é—á–∏—Ç—å 2FA, —Å–æ–∑–¥–∞—Ç—å App Password –¥–ª—è "Mail"
SMTP_PASSWORD=your-app-password-here

# ==============================================================================
# üîß –ü–†–ò–õ–û–ñ–ï–ù–ò–ï
# ==============================================================================
# –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ (true = –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏, auto-reload)
DEBUG=false

# –û–∫—Ä—É–∂–µ–Ω–∏–µ: local / dev / staging / prod
ENVIRONMENT=local

# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT (–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å: openssl rand -hex 32)
JWT_SECRET=your-secret-key-minimum-32-characters
```

---

## üåä 4. –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ "–≤–æ–ª–Ω–∞–º–∏" –∞–≥–µ–Ω—Ç–æ–≤

### –ò–µ—Ä–∞—Ä—Ö–∏—è

```
–ü—Ä–æ–µ–∫—Ç
‚îî‚îÄ‚îÄ –§–∞–∑–∞ (–∫—Ä—É–ø–Ω–∞—è —Ü–µ–ª—å –ø—Ä–æ–¥—É–∫—Ç–∞)
    ‚îî‚îÄ‚îÄ –í–æ–ª–Ω–∞ (–≥—Ä—É–ø–ø–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤)
        ‚îî‚îÄ‚îÄ –ê–≥–µ–Ω—Ç (–æ–¥–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞)
```

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

| –¢–µ—Ä–º–∏–Ω | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| **–§–∞–∑–∞** | –ö—Ä—É–ø–Ω–∞—è —Ü–µ–ª—å –ø—Ä–æ–¥—É–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è", "API v2", "Health Check") |
| **–í–æ–ª–Ω–∞** | –ì—Ä—É–ø–ø–∞ –∞–≥–µ–Ω—Ç–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ü–ê–†–ê–õ–õ–ï–õ–¨–ù–û –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ |
| **–ê–≥–µ–Ω—Ç** | –û–¥–∏–Ω AI-–∞–≥–µ–Ω—Ç, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π –æ–¥–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É |
| **Core/–ú–æ–∑–≥** | –ì–ª–∞–≤–Ω—ã–π –∞–≥–µ–Ω—Ç, –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—â–∏–π —Ä–∞–±–æ—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã |

### 4.1 –ü—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –≤–æ–ª–Ω

**–í –æ–¥–Ω–æ–π –≤–æ–ª–Ω–µ –∞–≥–µ–Ω—Ç—ã:**
- ‚úÖ –ù–ï —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ñ–∞–π–ª—ã/–ø–∞–ø–∫–∏
- ‚úÖ –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥—Ä—É–≥ –¥—Ä—É–≥–∞
- ‚úÖ –ú–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

**–ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ B –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–¥–∞—á–∏ A ‚Äî —ç—Ç–æ –†–ê–ó–ù–´–ï –≤–æ–ª–Ω—ã:**
```
Wave N:   –ê–≥–µ–Ω—Ç A —Å–æ–∑–¥–∞—ë—Ç –º–æ–¥—É–ª—å/—Ñ–∞–π–ª
Wave N+1: –ê–≥–µ–Ω—Ç B –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –º–æ–¥—É–ª—å/—Ñ–∞–π–ª
```

### 4.2 –ö–æ–Ω—Ç—Ä–∞–∫—Ç –∞–≥–µ–Ω—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞)

–ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –û–ë–Ø–ó–ê–ù:

1. **üîç –ü–ï–†–í–´–ú –î–ï–õ–û–ú ‚Äî –∏–∑—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç:**
   - –ü—Ä–æ—á–∏—Ç–∞—Ç—å `docs/project-plan.md` ‚Äî –æ–±—â–∏–π –ø–ª–∞–Ω
   - –ü—Ä–æ—á–∏—Ç–∞—Ç—å `docs/technical-summary.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
   - –ü—Ä–æ—á–∏—Ç–∞—Ç—å `.cursorrules` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
   - –û—Å–æ–∑–Ω–∞—Ç—å —Å–≤–æ—ë –º–µ—Å—Ç–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É
   - **–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é!**

2. **–î–∞—Ç—å –∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç** ‚Äî –Ω–µ "–ø–æ–ª–æ–≤–∏–Ω—É –ø–æ–ª–æ–≤–∏–Ω—ã"

3. **–ù–µ –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ —Å–≤–æ—é –∑–æ–Ω—É —Ñ–∞–π–ª–æ–≤** ‚Äî —Ç–æ–ª—å–∫–æ —Ç–µ –ø–∞–ø–∫–∏, —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –≤ –ø—Ä–æ–º–ø—Ç–µ

4. **–ù–∞–ø–∏—Å–∞—Ç—å changelog** –≤ `docs/changelogs/wave-X-agent-Y.md`:
   - –ß—Ç–æ —Å–¥–µ–ª–∞–ª
   - –ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–ª/–∏–∑–º–µ–Ω–∏–ª
   - –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
   - –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 4.3 –†–æ–ª—å "–ú–æ–∑–≥–∞ –ø—Ä–æ–µ–∫—Ç–∞" (Core Agent)

**–ú–û–ó–ì ‚Äî —ç—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∏ –∫–æ–Ω—Ç—Ä–æ–ª—ë—Ä. –ù–ï –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å!**

Core/–ú–æ–∑–≥ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:

- üìñ –ß–∏—Ç–∞–µ—Ç changelog'–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–¥
- üîß –í—ã—è–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã/–¥—É–±–ª–∏/–±–∞–≥–∏ –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏
- üìù –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (`technical-summary.md`, –ø–ª–∞–Ω, –ø—Ä–æ–º–ø—Ç—ã)
- üèóÔ∏è –î–µ—Ä–∂–∏—Ç "–µ–¥–∏–Ω—ã–π –≤–∑–≥–ª—è–¥" –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- ‚úÖ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç —Ä–∞–±–æ—Ç—É –∞–≥–µ–Ω—Ç–æ–≤
- üöÄ –£–ø—Ä–∞–≤–ª—è–µ—Ç Git (–∫–æ–º–º–∏—Ç—ã, –≤–µ—Ç–∫–∏)

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**

> **–ú–û–ó–ì –ù–ï –î–û–õ–ñ–ï–ù —Å–∞–º –ø–∏—Å–∞—Ç—å –∫–æ–¥ –∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –±–∞–≥–∏!**
> 
> –ï—Å–ª–∏ –ú–û–ó–ì –∏–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±–Ω–∞—Ä—É–∂–∏–ª –ø—Ä–æ–±–ª–µ–º—É:
> 1. –ú–û–ó–ì –ø–∏—à–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
> 2. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—ã–π —á–∞—Ç —Å –Ω–æ–≤—ã–º –∞–≥–µ–Ω—Ç–æ–º
> 3. –ê–≥–µ–Ω—Ç –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—É
> 4. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–∞–µ—Ç –ú–û–ó–ì—É —á—Ç–æ –≥–æ—Ç–æ–≤–æ
> 5. –ú–û–ó–ì –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–∞–±–æ—Ç—É
>
> **–ü–æ—á–µ–º—É:** –ï—Å–ª–∏ –ú–û–ó–ì —Å–∞–º –∫–æ–¥–∏—Ç ‚Äî –µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞—Å–æ—Ä—è–µ—Ç—Å—è –¥–µ—Ç–∞–ª—è–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏,
> –∏ –æ–Ω —Ç–µ—Ä—è–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–∏–¥–µ—Ç—å –ø—Ä–æ–µ–∫—Ç —Ü–µ–ª–∏–∫–æ–º.

**Workflow –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–∞–±–æ—Ç—ã:**

```
1. –ê–≥–µ–Ω—Ç—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –≤–æ–ª–Ω—É
2. –ú–û–ó–ì –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã ‚Üí –ú–û–ó–ì –ø–∏—à–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Üí –ø.1
4. –ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Üí –ú–û–ó–ì —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "–ú–æ–≥—É —Å–¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç?"
5. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: "–î–∞, –≤—Å—ë –æ–∫"
6. –ú–û–ó–ì –¥–µ–ª–∞–µ—Ç –∫–æ–º–º–∏—Ç
7. –ú–û–ó–ì: "–ó–∞–ø—É—Å–∫–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é –≤–æ–ª–Ω—É?"
```

### 4.4 –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–¥–∞—á–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞

**–•–æ—Ä–æ—à–∏–π —Ä–∞–∑–º–µ—Ä –∑–∞–¥–∞—á–∏:**
- –†–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å 1-2 –∫–æ–º–∞–Ω–¥–∞–º–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞—Å–∞—é—Ç—Å—è –û–î–ù–û–ô –∑–æ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä `app/auth/` –∏–ª–∏ `app/api/v2/`)
- –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ –≤ —ç—Ç–æ–π –∂–µ –≤–æ–ª–Ω–µ
- **1 –∞–≥–µ–Ω—Ç = 1 –∑–∞–∫–æ–Ω—á–µ–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ**

**–°–ª–∏—à–∫–æ–º –º–µ–ª–∫–æ (–ø–ª–æ—Ö–æ):**
- "–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é" ‚Äî –¥–µ–ª–∞–µ—Ç Core –≤ —Ä–∞–º–∫–∞—Ö —Ä–µ–≤—å—é
- "–î–æ–±–∞–≤–∏—Ç—å –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –ª–æ–≥–∞" ‚Äî –¥–µ–ª–∞–µ—Ç Core

**–°–ª–∏—à–∫–æ–º –∫—Ä—É–ø–Ω–æ (–ø–ª–æ—Ö–æ):**
- "–°–¥–µ–ª–∞—Ç—å –≤–µ—Å—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å + UI + webhooks" ‚Äî –Ω—É–∂–Ω–æ –¥—Ä–æ–±–∏—Ç—å –Ω–∞ —Ñ–∞–∑—ã/–≤–æ–ª–Ω—ã

### 4.5 –®–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –∞–≥–µ–Ω—Ç–∞

```markdown
## [–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞ —Å –∞–≥–µ–Ω—Ç–æ–º] 
Agent X.Y ‚Äî [–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏]

### –ö–æ–Ω—Ç–µ–∫—Å—Ç
–¢—ã ‚Äî AI-–∞–≥–µ–Ω—Ç –≤ Cursor IDE. –¢–≤–æ—è –∑–∞–¥–∞—á–∞: [–æ–ø–∏—Å–∞–Ω–∏–µ].

### ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –°–ù–ê–ß–ê–õ–ê
**–ü—Ä–µ–∂–¥–µ —á–µ–º –ø–∏—Å–∞—Ç—å –∫–æ–¥ ‚Äî –∏–∑—É—á–∏ –ø—Ä–æ–µ–∫—Ç:**
1. –ü—Ä–æ—á–∏—Ç–∞–π `docs/project-plan.md` ‚Äî –ø–æ–π–º–∏ –æ–±—â–∏–π –ø–ª–∞–Ω
2. –ü—Ä–æ—á–∏—Ç–∞–π `docs/technical-summary.md` ‚Äî –ø–æ–π–º–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
3. –ü—Ä–æ—á–∏—Ç–∞–π `.cursorrules` ‚Äî –∑–∞–ø–æ–º–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
4. –û—Å–æ–∑–Ω–∞–π —Å–≤–æ—ë –º–µ—Å—Ç–æ –∏ –∑–∞–¥–∞—á—É –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
5. **–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–∏—Å—Ç—É–ø–∞–π –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é!**

### –¢–≤–æ—è –∑–æ–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
–¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –¢–û–õ–¨–ö–û —Å —ç—Ç–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏:
- `app/module_name/` ‚Äî —Å–æ–∑–¥–∞—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å
- `tests/unit/module_name/` ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã

### –ù–ï –¢–†–û–ì–ê–ô
- `app/other_module/` ‚Äî —ç—Ç–æ –∑–æ–Ω–∞ –¥—Ä—É–≥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
- `docs/` ‚Äî —ç—Ç–æ –∑–æ–Ω–∞ Core

### –ó–∞–¥–∞—á–∏
1. [ ] –°–æ–∑–¥–∞—Ç—å X
2. [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Y
3. [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã
4. [ ] –°–æ–∑–¥–∞—Ç—å changelog –≤ `docs/changelogs/wave-X-agent-Y.md`

### Definition of Done
- [ ] –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] Changelog –Ω–∞–ø–∏—Å–∞–Ω
```

---

## üß™ 5. –ü—Ä–∞–≤–∏–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 5.1 –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

| –¢–∏–ø | –°–∫–æ—Ä–æ—Å—Ç—å | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å |
|-----|----------|-------------|-----------------|
| **Unit** | < 1 —Å–µ–∫ | –ù–µ—Ç (–º–æ–∫–∏) | –ö–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç |
| **Integration** | 1-10 —Å–µ–∫ | –ë–î, Redis | Pull Request |
| **E2E** | > 10 —Å–µ–∫ | –í—Å—ë | –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º |
| **Load** | –ú–∏–Ω—É—Ç—ã | –í—Å—ë | –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ |

### 5.2 –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–ö–∞–∂–¥—ã–π endpoint = –º–∏–Ω–∏–º—É–º 5 —Ç–µ—Å—Ç–æ–≤:**

```python
class TestMyEndpoint:
    async def test_success(self):
        """‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (200/201)"""
        
    async def test_unauthorized(self):
        """üîê –ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401)"""
        
    async def test_forbidden(self):
        """üö´ –ù–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (403)"""
        
    async def test_not_found(self):
        """‚ùì –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω (404)"""
        
    async def test_validation_error(self):
        """‚ö†Ô∏è –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (422)"""
```

**–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å/–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä = –º–∏–Ω–∏–º—É–º 3 —Ç–µ—Å—Ç–∞:**

```python
class TestMyService:
    async def test_happy_path(self):
        """‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π"""
        
    async def test_edge_case(self):
        """üîÑ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏"""
        
    async def test_error_handling(self):
        """‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫"""
```

### 5.3 –ú–∞—Ä–∫–µ—Ä—ã pytest

```python
@pytest.mark.unit          # –ë—ã—Å—Ç—Ä—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
@pytest.mark.integration   # –¢—Ä–µ–±—É—é—Ç –ë–î/Redis/–≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
@pytest.mark.slow          # –î–æ–ª–≥–∏–µ —Ç–µ—Å—Ç—ã (> 5 —Å–µ–∫)
@pytest.mark.external      # –¢—Ä–µ–±—É—é—Ç –≤–Ω–µ—à–Ω–∏–µ API (–Ω–µ –≤ CI)
@pytest.mark.smoke         # –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
```

### 5.4 –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º

```bash
# –í–°–ï–ì–î–ê –∑–∞–ø—É—Å–∫–∞—Ç—å:
pytest -v --tb=short

# –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã —É–ø–∞–ª–∏ ‚Äî –∏—Å–ø—Ä–∞–≤–∏—Ç—å –î–û –∫–æ–º–º–∏—Ç–∞!
```

---

## üêõ 6. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫ (Severity)

### –°—Ç–∞–Ω–¥–∞—Ä—Ç ISTQB (S1-S5)

| Severity | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | SLA |
|----------|----------|----------|-----|
| **S1** | üî¥ BLOCKER | –°–∏—Å—Ç–µ–º–∞ –º–µ—Ä—Ç–≤–∞. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—Ä–∞–±–æ—Ç–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã. | 30 –º–∏–Ω—É—Ç |
| **S2** | üü† CRITICAL | –ö–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, workaround –Ω–µ—Ç. | 2 —á–∞—Å–∞ |
| **S3** | üü° MAJOR | –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ –µ—Å—Ç—å workaround. | 6 —á–∞—Å–æ–≤ |
| **S4** | üîµ MINOR | –ù–µ—É–¥–æ–±—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –Ω–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç. | 2 –¥–Ω—è |
| **S5** | ‚ö™ TRIVIAL | –ö–æ—Å–º–µ—Ç–∏–∫–∞ (–æ–ø–µ—á–∞—Ç–∫–∏, –º–µ–ª–∫–∏–µ UI –±–∞–≥–∏). | 2 –Ω–µ–¥–µ–ª–∏ |

### –ü—Ä–∏–º–µ—Ä—ã

**S1 BLOCKER:**
- –°–∞–π—Ç –≤—ã–¥–∞—ë—Ç 500 –æ—à–∏–±–∫—É –ø—Ä–∏ –ª—é–±–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**S2 CRITICAL:**
- –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–ª–∞—Ç–µ–∂–∏
- –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**S3 MAJOR:**
- –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã (–¥—Ä—É–≥–∏–µ —Ä–∞–±–æ—Ç–∞—é—Ç)
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (> 10 —Å–µ–∫)
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á—ë—Ç, –Ω–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –≤—Ä—É—á–Ω—É—é

**S4 MINOR:**
- –ö–Ω–æ–ø–∫–∞ —Å—ä–µ—Ö–∞–ª–∞ –Ω–∞ 5 –ø–∏–∫—Å–µ–ª–µ–π
- –ù–µ—É–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–µ—Å—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

**S5 TRIVIAL:**
- –û–ø–µ—á–∞—Ç–∫–∞ –≤ —Ç–µ–∫—Å—Ç–µ
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫ —Ü–≤–µ—Ç–∞
- –ü—Ä–æ–ø—É—â–µ–Ω–Ω–∞—è –∑–∞–ø—è—Ç–∞—è

### Severity vs Priority

```
Severity = –ù–∞—Å–∫–æ–ª—å–∫–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —Å–ª–æ–º–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ (–æ–±—ä–µ–∫—Ç–∏–≤–Ω—ã–π —Ñ–∞–∫—Ç)
Priority = –ö–∞–∫ –±—ã—Å—Ç—Ä–æ –Ω—É–∂–Ω–æ —á–∏–Ω–∏—Ç—å (–±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏–µ)

–ü—Ä–∏–º–µ—Ä:
- –û–ø–µ—á–∞—Ç–∫–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
- Severity: S5 (—Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- Priority: P1 (—Ä–µ–ø—É—Ç–∞—Ü–∏—è, —á–∏–Ω–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ!)
```

---

## üîÄ 7. Git Workflow

### ‚ö†Ô∏è –ü–ï–†–í–´–ú –î–ï–õ–û–ú ‚Äî –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Git

**–ú–û–ó–ì –æ–±—è–∑–∞–Ω –≤ –Ω–∞—á–∞–ª–µ –ø—Ä–æ–µ–∫—Ç–∞ (–¥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞):**

1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞—Ç—å `.gitignore`
3. –°–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç —Å–æ —Å—Ç–∞—Ä—Ç–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤–µ—Ç–æ–∫

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
git init
git add .
git commit -m "chore: initial project setup"

# –°–æ–∑–¥–∞—Ç—å remote (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
git remote add origin https://github.com/user/repo.git
git push -u origin main
```

### –†–µ–∂–∏–º—ã Git Workflow

#### üè† –†–µ–∂–∏–º "Pet Project" (1 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫)

**–î–ª—è –ª–∏—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤, MVP:**

```
main ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –≤–µ—Ç–∫–∞, –∫–æ–º–º–∏—Ç–∏–º –Ω–∞–ø—Ä—è–º—É—é
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- ‚úÖ –ö–æ–º–º–∏—Ç–∏–º –Ω–∞–ø—Ä—è–º—É—é –≤ `main`
- ‚úÖ –ü—É—à–∏–º —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞
- ‚ùå –ù–µ –Ω—É–∂–Ω—ã Pull Request'—ã
- ‚ùå –ù–µ –Ω—É–∂–Ω—ã —Ä–µ–≤—å—é

```bash
git add .
git commit -m "feat: add user authentication"
git push
```

#### üè¢ –†–µ–∂–∏–º "Production" (–∫–æ–º–∞–Ω–¥–∞, –ø—Ä–æ–¥–∞–∫—à–Ω)

**–î–ª—è —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º –∏ –∫–æ–º–∞–Ω–¥–æ–π:**

```
main        ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞ (–ø—Ä–æ–¥–∞–∫—à–Ω), –∑–∞—â–∏—â—ë–Ω–Ω–∞—è
test        ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –≤–µ—Ç–∫–∞ (—Å—Ç–µ–π–¥–∂–∏–Ω–≥)
feature/*   ‚Äî –≤–µ—Ç–∫–∏ –ø–æ–¥ —Ñ–∏—á–∏
bugfix/*    ‚Äî –≤–µ—Ç–∫–∏ –ø–æ–¥ –±–∞–≥-—Ñ–∏–∫—Å—ã
hotfix/*    ‚Äî —Å—Ä–æ—á–Ω—ã–µ —Ñ–∏–∫—Å—ã –ø—Ä–æ–¥–∞–∫—à–Ω–∞
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- ‚ùå **–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ `main`**
- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ Pull Request
- ‚úÖ –ú–∏–Ω–∏–º—É–º 1 —Ä–µ–≤—å—é –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º
- ‚úÖ CI/CD –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –í–µ—Ç–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å up-to-date —Å main

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É
git checkout -b feature/user-auth

# –†–∞–±–æ—Ç–∞...
git add .
git commit -m "feat: add user authentication"
git push -u origin feature/user-auth

# –°–æ–∑–¥–∞—Ç—å Pull Request —á–µ—Ä–µ–∑ GitHub/GitLab
# –ü–æ—Å–ª–µ —Ä–µ–≤—å—é –∏ approve ‚Äî merge –≤ main
```

#### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞

–í –Ω–∞—á–∞–ª–µ –ø—Ä–æ–µ–∫—Ç–∞ –ú–û–ó–ì –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤ `docs/project-plan.md`:

```markdown
## Git Workflow
**–†–µ–∂–∏–º:** Pet Project / Production (–≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω–æ)

–ü—Ä–∏—á–∏–Ω–∞: [–æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—á–µ–º—É –≤—ã–±—Ä–∞–Ω —ç—Ç–æ—Ç —Ä–µ–∂–∏–º]
```

**–ö–æ–≥–¥–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –Ω–∞ Production:**
- –ü–æ—è–≤–∏–ª—Å—è –≤—Ç–æ—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
- –ü—Ä–æ–µ–∫—Ç –≤—ã—Ö–æ–¥–∏—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
- –ù—É–∂–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞

### –§–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–æ–≤ (Conventional Commits)

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

**–¢–∏–ø—ã:**
- `feat` ‚Äî –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- `fix` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
- `docs` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `style` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ–¥)
- `refactor` ‚Äî —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- `test` ‚Äî —Ç–µ—Å—Ç—ã
- `chore` ‚Äî –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∫–æ–Ω—Ñ–∏–≥–∏)

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
feat(auth): add JWT refresh token support
fix(api): correct validation for email field
docs(readme): update installation instructions
test(user): add unit tests for UserService
```

---

## üíª 8. Code Style Guidelines

### Python –≤–µ—Ä—Å–∏—è –∏ Type Hints

```python
# –í–µ—Ä—Å–∏—è: Python 3.10+
# Type hints: –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´ –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –º–µ—Ç–æ–¥–æ–≤
```

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ

```python
class UserService:          # PascalCase –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
    def get_user(self):     # snake_case –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π/–º–µ—Ç–æ–¥–æ–≤
        pass

MAX_RETRIES = 3             # UPPERCASE –¥–ª—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç
user_name = "John"          # snake_case –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
```

### –ü–æ—Ä—è–¥–æ–∫ –∏–º–ø–æ—Ä—Ç–æ–≤

```python
# 1. Standard library
import asyncio
from datetime import datetime

# 2. Third-party
from fastapi import Depends
from sqlalchemy import Column

# 3. Local application
from app.models import User
from app.utils import helper
```

### üìù Docstrings (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

**–ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è/–º–µ—Ç–æ–¥ –î–û–õ–ñ–ù–ê –∏–º–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π docstring:**

```python
async def create_user(
    email: str,
    password: str,
    role: UserRole = UserRole.USER,
    db: AsyncSession = None,
) -> User:
    """
    –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ.
    
    –§—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
    1. –í–∞–ª–∏–¥–∞—Ü–∏—é email (—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å, —Ñ–æ—Ä–º–∞—Ç)
    2. –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è (bcrypt, 12 rounds)
    3. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î
    4. –û—Ç–ø—Ä–∞–≤–∫—É welcome email (async, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
    
    Args:
        email: Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≤ —Å–∏—Å—Ç–µ–º–µ.
               –§–æ—Ä–º–∞—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ pydantic EmailStr.
        password: –ü–∞—Ä–æ–ª—å –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ. –ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤,
                  –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ü–∏—Ñ—Ä—É –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª.
        role: –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é USER.
              –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–æ–ª–∏: USER, ADMIN, MODERATOR.
        db: –°–µ—Å—Å–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ None ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
    
    Returns:
        User: –°–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏:
              - id: int ‚Äî –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç
              - email: str ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π email (lowercase)
              - created_at: datetime ‚Äî UTC timestamp
              - role: UserRole ‚Äî –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è —Ä–æ–ª—å
    
    Raises:
        EmailAlreadyExistsError: –ï—Å–ª–∏ email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω.
        WeakPasswordError: –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º.
        DatabaseError: –ü—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î.
    
    Example:
        >>> user = await create_user(
        ...     email="john@example.com",
        ...     password="SecurePass123!",
        ...     role=UserRole.ADMIN
        ... )
        >>> print(user.id)
        42
    
    Note:
        - Email –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –∫ lowercase –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
        - –ü–∞—Ä–æ–ª—å –ù–ò–ö–û–ì–î–ê –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
        - Welcome email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ Celery
    
    See Also:
        - update_user: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        - delete_user: –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        - get_user_by_email: –ü–æ–∏—Å–∫ –ø–æ email
    """
    # --- –í–∞–ª–∏–¥–∞—Ü–∏—è email ---
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ email –µ—â—ë –Ω–µ –∑–∞–Ω—è—Ç
    existing = await db.execute(
        select(User).where(User.email == email.lower())
    )
    if existing.scalar_one_or_none():
        raise EmailAlreadyExistsError(f"Email {email} —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω")
    
    # --- –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è ---
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º bcrypt —Å cost factor 12 (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è OWASP 2024)
    password_hash = bcrypt.hashpw(
        password.encode('utf-8'),
        bcrypt.gensalt(rounds=12)
    )
    
    # --- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ---
    user = User(
        email=email.lower(),  # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫ lowercase
        password_hash=password_hash,
        role=role,
        created_at=datetime.utcnow(),
    )
    
    db.add(user)
    await db.commit()
    await db.refresh(user)
    
    # --- –û—Ç–ø—Ä–∞–≤–∫–∞ welcome email ---
    # –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ Celery
    send_welcome_email.delay(user.id)
    
    return user
```

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–¥–∞

```python
async def process_payment(order_id: int, amount: Decimal) -> PaymentResult:
    """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞—Ç—ë–∂ –∑–∞ –∑–∞–∫–∞–∑."""
    
    # === –í–ê–õ–ò–î–ê–¶–ò–Ø ===
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–∞–∫–∞–∑ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Å—Ç–∞—Ç—É—Å–µ
    order = await get_order(order_id)
    if order.status != OrderStatus.PENDING:
        raise InvalidOrderStatusError(
            f"–ó–∞–∫–∞–∑ {order_id} –≤ —Å—Ç–∞—Ç—É—Å–µ {order.status}, –æ–∂–∏–¥–∞–ª—Å—è PENDING"
        )
    
    # === –†–ê–°–ß–Å–¢ –ö–û–ú–ò–°–°–ò–ò ===
    # –ö–æ–º–∏—Å—Å–∏—è –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã: 2.9% + $0.30
    # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è: $0.50
    commission = max(
        amount * Decimal("0.029") + Decimal("0.30"),
        Decimal("0.50")
    )
    
    # === –í–´–ó–û–í –ü–õ–ê–¢–Å–ñ–ù–û–ì–û –®–õ–Æ–ó–ê ===
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º Stripe API v2024-01
    # –¢–∞–π–º–∞—É—Ç: 30 —Å–µ–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è Stripe –¥–ª—è production)
    try:
        stripe_result = await stripe_client.create_charge(
            amount=int(amount * 100),  # Stripe –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ü–µ–Ω—Ç—ã
            currency="usd",
            metadata={"order_id": str(order_id)},
        )
    except StripeTimeoutError:
        # –ü—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ ‚Äî –ù–ï –ø–æ–≤—Ç–æ—Ä—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
        # –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥–≤–æ–π–Ω–æ–º—É —Å–ø–∏—Å–∞–Ω–∏—é
        raise PaymentTimeoutError("Stripe –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –∑–∞ 30 —Å–µ–∫—É–Ω–¥")
    
    # === –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–¢–ê–¢–£–°–ê –ó–ê–ö–ê–ó–ê ===
    # –í–∞–∂–Ω–æ: —Å–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–ª—è–µ–º –ë–î, –ø–æ—Ç–æ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    # –ò–Ω–∞—á–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–≤–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç—É ‚Äî –ø–ª–∞—Ç—ë–∂ –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω
    order.status = OrderStatus.PAID
    order.paid_at = datetime.utcnow()
    order.payment_id = stripe_result.id
    await db.commit()
    
    return PaymentResult(
        success=True,
        payment_id=stripe_result.id,
        amount=amount,
        commission=commission,
    )
```

### Flake8 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.flake8)

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.flake8` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```ini
[flake8]
# === –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò ===
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏ (—á—É—Ç—å –±–æ–ª—å—à–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö 79 –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏)
max-line-length = 120

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏
max-complexity = 10

# === –ò–ì–ù–û–†–ò–†–£–ï–ú–´–ï –ü–†–ê–í–ò–õ–ê ===
ignore =
    # E501: line too long ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ max-line-length
    # W503: line break before binary operator ‚Äî —É—Å—Ç–∞—Ä–µ–ª–æ, PEP 8 –∏–∑–º–µ–Ω–∏–ª—Å—è
    # E203: whitespace before ':' ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å black
    # E266: too many leading '#' for block comment ‚Äî –º–µ—à–∞–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º
    W503,
    E203,
    E266,

# === –ò–°–ö–õ–Æ–ß–ï–ù–ò–Ø ===
exclude =
    .git,
    __pycache__,
    .venv,
    venv,
    .eggs,
    *.egg,
    build,
    dist,
    migrations,
    alembic/versions,
    .mypy_cache,
    .pytest_cache,
    temporary,

# === PER-FILE IGNORES ===
per-file-ignores =
    # –í __init__.py —Ä–∞–∑—Ä–µ—à–∞–µ–º –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã (F401)
    __init__.py: F401
    # –í —Ç–µ—Å—Ç–∞—Ö —Ä–∞–∑—Ä–µ—à–∞–µ–º –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ assert
    tests/*: E501, S101
    # –í –∫–æ–Ω—Ñ–∏–≥–∞—Ö —Ä–∞–∑—Ä–µ—à–∞–µ–º hardcoded –∑–Ω–∞—á–µ–Ω–∏—è
    */settings.py: S105, S106

# === –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–†–û–í–ï–†–ö–ò ===
# –í–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É docstrings
doctests = True

# –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏ –æ—à–∏–±–∫–µ
show-source = True

# –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
statistics = True

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –¥–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (0 = –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è)
max-errors = 0
```

---

## üìã 9. –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º

### –ö–æ–¥
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (`pytest -v`)
- [ ] –ù–µ—Ç lint –æ—à–∏–±–æ–∫ (`flake8 .`)
- [ ] Type hints –≤–µ–∑–¥–µ
- [ ] Docstrings –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] README –∞–∫—Ç—É–∞–ª–µ–Ω
- [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] Changelog –æ–±–Ω–æ–≤–ª—ë–Ω
- [ ] .env.example –∞–∫—Ç—É–∞–ª–µ–Ω

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [ ] –ù–µ—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ
- [ ] –ù–µ—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –ª–æ–≥–∞—Ö
- [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±–µ–∑ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π (`pip-audit`)

### Git
- [ ] –ö–æ–º–º–∏—Ç—ã —Å –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- [ ] –ù–µ—Ç –º—É—Å–æ—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- [ ] PR –ø—Ä–æ—à—ë–ª —Ä–µ–≤—å—é (–µ—Å–ª–∏ Production —Ä–µ–∂–∏–º)

---

## üìñ 10. –®–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### docs/architecture.md ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã

**–§–æ—Ä–º–∞—Ç: Mermaid** ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø—Ä—è–º–æ –≤ GitHub/GitLab –∏ –≤ Cursor!

```markdown
# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞: [–ù–∞–∑–≤–∞–Ω–∏–µ]

## –û–±—â–∞—è —Å—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TB
    subgraph "Frontend"
        WEB[Web App]
        MOBILE[Mobile App]
    end
    
    subgraph "API Gateway"
        NGINX[Nginx]
    end
    
    subgraph "Backend"
        API[FastAPI App]
        CELERY[Celery Workers]
    end
    
    subgraph "Data Layer"
        PG[(PostgreSQL)]
        REDIS[(Redis)]
        S3[(S3 Storage)]
    end
    
    subgraph "External Services"
        OPENAI[OpenAI API]
        STRIPE[Stripe]
        SMTP[SMTP Server]
    end
    
    WEB --> NGINX
    MOBILE --> NGINX
    NGINX --> API
    API --> PG
    API --> REDIS
    API --> S3
    API --> CELERY
    CELERY --> PG
    CELERY --> REDIS
    CELERY --> OPENAI
    CELERY --> STRIPE
    CELERY --> SMTP
```

## –°—Ö–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞

```mermaid
sequenceDiagram
    participant C as Client
    participant A as API
    participant D as Database
    participant R as Redis
    participant W as Celery Worker
    
    C->>A: POST /api/process
    A->>D: Save request
    A->>R: Add task to queue
    A-->>C: 202 Accepted (task_id)
    
    R->>W: Get task
    W->>D: Update status: processing
    W->>W: Process data
    W->>D: Save result
    W->>D: Update status: completed
    
    C->>A: GET /api/result/{task_id}
    A->>D: Get result
    A-->>C: 200 OK (result)
```

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```mermaid
erDiagram
    USER ||--o{ ORDER : places
    USER {
        int id PK
        string email UK
        string password_hash
        datetime created_at
    }
    ORDER ||--|{ ORDER_ITEM : contains
    ORDER {
        int id PK
        int user_id FK
        string status
        decimal total
        datetime created_at
    }
    ORDER_ITEM {
        int id PK
        int order_id FK
        int product_id FK
        int quantity
        decimal price
    }
    PRODUCT ||--o{ ORDER_ITEM : "ordered in"
    PRODUCT {
        int id PK
        string name
        decimal price
        int stock
    }
```
```

**–ö–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã:**
1. **GitHub/GitLab** ‚Äî —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **VS Code/Cursor** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ "Markdown Preview Mermaid Support"
3. **–û–Ω–ª–∞–π–Ω** ‚Äî https://mermaid.live/

### docs/project-plan.md

```markdown
# –ü–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞: [–ù–∞–∑–≤–∞–Ω–∏–µ]

## Git Workflow
**–†–µ–∂–∏–º:** Pet Project / Production

## –§–∞–∑–∞ 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å .gitignore, .env.example, .cursorrules
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å README

## –§–∞–∑–∞ 1: MVP
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

## –§–∞–∑–∞ 2: ...
```

### docs/technical-summary.md

**–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ò–°–ß–ï–†–ü–´–í–ê–Æ–©–ò–ú ‚Äî —á—Ç–æ–±—ã –Ω–µ –ª–µ–∑—Ç—å –≤ –∫–æ–¥!**

```markdown
# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ: [–ù–∞–∑–≤–∞–Ω–∏–µ]

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

[–°—Å—ã–ª–∫–∞ –Ω–∞ docs/architecture.md —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏]

### –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- **Backend:** FastAPI 0.109+
- **Database:** PostgreSQL 16
- **Cache:** Redis 7
- **Task Queue:** Celery 5.3
- **Storage:** S3-compatible (MinIO / AWS S3)

## 2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 2.1 –ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`app/auth/`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–§–∞–π–ª—ã:**
- `router.py` ‚Äî —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã /login, /register, /refresh
- `service.py` ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- `schemas.py` ‚Äî Pydantic –º–æ–¥–µ–ª–∏
- `utils.py` ‚Äî —Ö–µ–ª–ø–µ—Ä—ã (—Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, JWT)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```python
from app.auth.service import AuthService

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
user = await auth_service.register(
    email="user@example.com",
    password="SecurePass123!"
)

# –õ–æ–≥–∏–Ω
tokens = await auth_service.login(
    email="user@example.com",
    password="SecurePass123!"
)
# tokens.access_token ‚Äî JWT —Ç–æ–∫–µ–Ω (expires: 15 min)
# tokens.refresh_token ‚Äî Refresh —Ç–æ–∫–µ–Ω (expires: 7 days)
```

**–ù—é–∞–Ω—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è:**

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ß—Ç–æ –¥–µ–ª–∞—Ç—å |
|-----------|----------|------------|
| `user.is_active=False` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω | –í–µ—Ä–Ω—É—Ç—å 403 Forbidden |
| `user.email_verified=False` | Email –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω | –†–∞–∑—Ä–µ—à–∏—Ç—å –ª–æ–≥–∏–Ω, –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ |
| `token expired` | JWT –∏—Å—Ç—ë–∫ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å refresh token |
| `refresh token expired` | –í—Å—ë –∏—Å—Ç–µ–∫–ª–æ | –¢—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω |

### 2.2 –ú–æ–¥—É–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ (`app/processing/`)

**–°—Ç–∞—Ç—É—Å—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏:**

```
PENDING ‚Üí PROCESSING ‚Üí COMPLETED
                    ‚Üò FAILED
                    ‚Üò CANCELLED
```

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å? |
|--------|----------|-----------------|
| `PENDING` | –í –æ—á–µ—Ä–µ–¥–∏ | ‚úÖ –î–∞ |
| `PROCESSING` | –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è | ‚ùå –ù–µ—Ç |
| `COMPLETED` | –ì–æ—Ç–æ–≤–æ | ‚Äî |
| `FAILED` | –û—à–∏–±–∫–∞ | ‚Äî |
| `CANCELLED` | –û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º | ‚Äî |

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**

```json
{
  "id": 123,
  "status": "COMPLETED",
  "result": {
    "text": "–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç...",
    "confidence": 0.95,
    "language": "ru",
    "duration_sec": 125.4
  },
  "error": null,
  "created_at": "2024-01-15T10:30:00Z",
  "completed_at": "2024-01-15T10:32:05Z"
}
```

## 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 3.1 OpenAI API

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:** GPT-4 –∞–Ω–∞–ª–∏–∑, embeddings

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096
```

**Rate Limits:**
- TPM (tokens per minute): 90,000
- RPM (requests per minute): 3,500

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
```python
try:
    response = await openai_client.chat(...)
except RateLimitError:
    # –ñ–¥—ë–º –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º (exponential backoff)
except APIError as e:
    if e.status_code == 503:
        # OpenAI –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω ‚Äî retry —á–µ—Ä–µ–∑ 5 —Å–µ–∫
    else:
        raise
```

## 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

[–°—Å—ã–ª–∫–∞ –Ω–∞ docs/production/database-schema.md]

### –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "add users table"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å
alembic upgrade head

# –û—Ç–∫–∞—Ç–∏—Ç—å
alembic downgrade -1
```

## 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–º. `.env.example` ‚Äî —Ç–∞–º –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.
```

### docs/production/ ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–∞—à–∏–º API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∞—à–µ–π –ë–î –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
- –ü–æ–Ω–∏–º–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ —á—Ç–µ–Ω–∏—è –∫–æ–¥–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- üìù **–ò–°–ß–ï–†–ü–´–í–ê–Æ–©–ê–Ø** ‚Äî –≤—Å—ë —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –±–µ–∑ —á—Ç–µ–Ω–∏—è –∫–æ–¥–∞
- üîç **–î–ï–¢–ê–õ–¨–ù–ê–Ø** ‚Äî –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –≤—Å–µ —Å—Ç–∞—Ç—É—Å—ã, –≤—Å–µ –æ—à–∏–±–∫–∏
- üìã **–° –ü–†–ò–ú–ï–†–ê–ú–ò** ‚Äî curl –∫–æ–º–∞–Ω–¥—ã, JSON –æ—Ç–≤–µ—Ç—ã, –∫–æ–¥
- ‚ö†Ô∏è **–° –ù–Æ–ê–ù–°–ê–ú–ò** ‚Äî edge cases, –ª–∏–º–∏—Ç—ã, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
docs/production/
‚îú‚îÄ‚îÄ README.md           # –û–±–∑–æ—Ä: —á—Ç–æ —ç—Ç–æ, –¥–ª—è –∫–æ–≥–æ, –∫—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å
‚îú‚îÄ‚îÄ api-reference.md    # –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ API (endpoints, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –æ—Ç–≤–µ—Ç—ã)
‚îú‚îÄ‚îÄ database-schema.md  # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (—Ç–∞–±–ª–∏—Ü—ã, —Å–≤—è–∑–∏, —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö)
‚îú‚îÄ‚îÄ quick-reference.md  # –®–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
‚îú‚îÄ‚îÄ examples/           # –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ python/
‚îÇ   ‚îú‚îÄ‚îÄ javascript/
‚îÇ   ‚îî‚îÄ‚îÄ curl/
‚îî‚îÄ‚îÄ changelog.md        # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π API
```

**–ü—Ä–∏–º–µ—Ä docs/production/api-reference.md:**

```markdown
# API Reference

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:
```
Authorization: Bearer <access_token>
```

### POST /api/auth/login

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞

**Request:**
```json
{
  "email": "user@example.com",
  "password": "SecurePass123!"
}
```

**Response 200:**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIs...",
  "refresh_token": "dGhpcyBpcyBhIHJlZnJl...",
  "token_type": "bearer",
  "expires_in": 900
}
```

**Response 401:**
```json
{
  "detail": "Invalid credentials",
  "error_code": "AUTH_INVALID_CREDENTIALS"
}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏:**

| –ö–æ–¥ | error_code | –û–ø–∏—Å–∞–Ω–∏–µ | –ß—Ç–æ –¥–µ–ª–∞—Ç—å |
|-----|------------|----------|------------|
| 401 | AUTH_INVALID_CREDENTIALS | –ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ |
| 401 | AUTH_USER_INACTIVE | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω | –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É |
| 422 | VALIDATION_ERROR | –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å JSON |
| 429 | RATE_LIMIT_EXCEEDED | –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ | –ü–æ–¥–æ–∂–¥–∞—Ç—å 60 —Å–µ–∫ |
```

### docs/changelogs/wave-X-agent-Y.md

```markdown
# Changelog: Wave X, Agent Y

## –ó–∞–¥–∞—á–∞
[–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
- –°–æ–∑–¥–∞–ª `app/module/file.py`
- –î–æ–±–∞–≤–∏–ª —Ç–µ—Å—Ç—ã –≤ `tests/unit/`
- –û–±–Ω–æ–≤–∏–ª `requirements.txt`

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
```bash
pytest tests/unit/module/ -v
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- [–ï—Å–ª–∏ –µ—Å—Ç—å]
```

---

## ‚ö° 11. Quick Reference

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–º–∞–Ω–¥–∞ / –§–∞–π–ª |
|----------|----------------|
| –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è AI | `.cursorrules` |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | `app/settings.py` |
| –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞ | `.env.example` |
| –ö–æ–Ω—Ñ–∏–≥ –ª–∏–Ω—Ç–µ—Ä–∞ | `.flake8` |
| –ü–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞ | `docs/project-plan.md` |
| –¢–µ—Ö. –æ–ø–∏—Å–∞–Ω–∏–µ | `docs/technical-summary.md` |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | `docs/architecture.md` |
| –ü—Ä–æ–º–ø—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤ | `docs/agent-prompts.md` |
| API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | `docs/production/api-reference.md` |
| Changelog'–∏ | `docs/changelogs/` |
| –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã | `pytest -v` |
| –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ | `flake8 .` |
| –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É | `git checkout -b feature/name` |
| Docker dev | `docker-compose -f docker-compose-dev.yml up -d` |

---

*–≠—Ç–æ—Ç playbook ‚Äî –∂–∏–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç. –û–±–Ω–æ–≤–ª—è–π—Ç–µ –µ–≥–æ –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–∞–∫—Ç–∏–∫ –∫–æ–º–∞–Ω–¥—ã.*
